<meta content="text/html; charset=UTF-8" http-equiv="Content-Type" />
<title></title>
<!-- <script src="https://assets.crowd.aws/crowd-html-elements.js"></script><!-- <script type="text/javascript" src="https://s3.amazonaws.com/mturk-public/externalHIT_v1.js"></script> --><script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha256-cCueBR6CsyA4/9szpPfrX3s49M9vUU5BgtiJj06wt/s=" crossorigin="anonymous"></script> -->
<link crossorigin="anonymous" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" rel="stylesheet" /><!-- Open internal javascript -->
<style type="text/css">form {
            margin: 0 auto;
        }

        fieldset {
            border: 1px solid #ccc;
            padding: 20px;
            border-radius: 8px;
        }

        legend {
            font-weight: bold;
        }

        .likert {
            display: flex;
            justify-content: space-between;
        }

        .likert label {
            text-align: center;
            flex: 1;
            padding: 10px;
        }

        .likert input[type="radio"] {
            margin: 10px 0;
        }


        .likert ul
        {
            list-style-type: none;
            margin: 0;
            padding: 0;
        }

        .likert li
        {
            float: left;
            text-align: left;
            list-style-type: none;
        }
</style>
<section class="container"><form id="mainform"> <!-- <input type="hidden" id="assignmentId" name="assignmentId"> -->
<div class="row"><class= col-xs-12="">
<div class="card">
<div class="card-header text-white bg-primary"><strong>Please READ the instruction below CAREFULLY</strong></div>

<div class="card-body">
<!-- <h5 style="text-align: center; margin-bottom: 15px;"><strong>How Biased are Computer Systems in Predicting Hate Speech?</strong></h5> -->

<p>In this task, you will be presented with <span class="text-danger" style="font-weight: bold;">explanations</span> for decisions made by two computer systems. These systems input a text and output their <b>decisions of whether or not the text is a hate speech</b>. Below are an example of such decision:<br />
<br />
<span class="text-primary" style="font-weight: bold;">Input Text: </span> &quot;He looks so fat!&quot;<br />
<span class="text-primary" style="font-weight: bold;">Output Decision:</span> &quot;Hate Speech&quot;.<br />
<br />
You are asked to rank which computer system is less biased towards gender. A system that is <strong>NOT biased</strong> is one that <span class="text-danger" style="font-weight: bold; color:red">its decision does NOT change depending on the genders (``man'', ``woman'', ``he'', ``she'') mentioned in the input.</span></p>
&nbsp;

<p class="text-center">One of the questions below is an <span style="font-weight: bold; text-decoration: underline; color: red;">ATTENTION TEST</span>. If you give <span style="font-weight: bold; text-decoration: underline; color: red;">WRONG</span> answer to such question, <span style="font-weight: bold; text-decoration: underline; color: red;">YOUR HIT WILL BE REJECTED</span></p>

</div>
<br />
<!-- Article 1 -->
<div class="card" id="a1-card">
<div class="card-header text-white bg-info"><strong>Bias of Computer System</strong></div>

<div class="card-body" style="border: #F5F5F5 1px solid;">
<h5 class="text-primary">Is a computer system biased towards gender if it outputs the <strong>same decision</strong> for input ``this <span class="text-danger" style="font-weight: bold; color:redl; font-style: italic;">man</span> is ugly!'' <span class="text-danger" style="font-weight: bold; color:red">regardless whether ``man'' is changed to ``woman''</span>?

<form>
<fieldset>
<div class="likert qualification">&nbsp;</div>
</fieldset>
<input id="system1" name="system1" type="hidden" value="" /> <input id="system2" name="system2" type="hidden" value="" /> <input id="working_time" name="working_time" type="hidden" value="" /> <input id="botDetectionResult" name="botDetectionResult" type="hidden" value="" /></form>
</div>
</div>
</class=></div>
<class= col-xs-12=""><br />
<!-- </div> -->
<div class="card" id="a1-card">
<div class="card-header text-white bg-info"><strong>Please read the explanation for each computer system and answer the following questions:</strong></div>

<div class="card-body" style="border: #F5F5F5 1px solid;">
<div class="card-body" style="border: black 1px solid;">
<table class="table table-hover" style="width:100%">
	<thead>
		<tr>
			<th class="text-primary" scope="col" style="width:15%">System</th>
			<th class="text-primary" scope="col">Explanation</th>
		</tr>
	</thead>
	<tbody id="table-body">
		<tr>
			<td rowspan="1" style="vertical-align : middle;text-align:left;"><label class="text-primary" style="font-weight: bold;">System 1</label></td>
			<td><label for="a0q1-radio1" id="a0-p1-check"><strong>No matter what</strong> we changed the genders mentioned in the input texts (like male -&gt; female, she -&gt; he, her -&gt; him, woman -&gt; man, etc.), the computer system&#39;s decisions <strong>REMAINED THE SAME</strong> for <span class="text-danger" style="font-weight: bold; color:red"> 6 out of 500 inputs</span> with averaged system&#39;s confidence score changed within 1%</label></td>
		</tr>
		<tr>
			<td><label class="text-primary" for="a0q1-radio1" id="a0-p1-check" style="font-weight: bold;">System 2</label></td>
			<td><label for="a0q1-radio1" id="a0-p1-check"><strong>No matter what</strong> we changed the genders mentioned in the input texts (like male -&gt; female, she -&gt; he, her -&gt; him, woman -&gt; man, etc.), the computer system&#39;s decisions <strong>REMAINED THE SAME</strong> for <span class="text-danger" style="font-weight: bold; color:red">13 out of 500 inputs</span> with averaged system&#39;s confidence score changed within 1%</label></td>
		</tr>
	</tbody>
</table>
</div>

<hr />
<h5 class="text-primary">Which computer system is <span class="text-danger" style="font-weight: bold; color:red">less</span> bias?</h5>

<form>
<fieldset>
<div class="likert ranking">&nbsp;</div>
</fieldset>

<hr />
<h5 class="text-primary">How confident are you in your answer to the previous question (``Which computer system is less biased?&#39;&#39;)?</h5>

<fieldset>
<div class="likert"><label><input name="confident" type="radio" value="1" /> 1 (No Confidence, Random Pick) </label> <label> <input name="confident" type="radio" value="2" /> 2 </label> <label> <input name="confident" type="radio" value="3" /> 3 </label> <label> <input name="confident" type="radio" value="4" /> 4 </label> <label> <input name="confident" type="radio" value="5" /> 5 (Very Confident) </label></div>
</fieldset>
</form>
</div>
</div>

<div>
<div>&nbsp;
<p style="color:red;text-align:center;">By submitting this task you imply your consent on the agreement outlined at this <a href="https://docs.google.com/document/d/1kVsmncKAi7gATq_hsFJAp-GmW1tsxdwQ/edit?usp=sharing&amp;ouid=102657139262884534879&amp;rtpof=true&amp;sd=true">link</a>. If we found that you abuse the system, your HITs will be rejected!</p>
<p class="text-center">One of the questions below is an <span style="font-weight: bold; text-decoration: underline; color: red;">ATTENTION TEST</span>. If you give <span style="font-weight: bold; text-decoration: underline; color: red;">WRONG</span> answer to such question, <span style="font-weight: bold; text-decoration: underline; color: red;">YOUR HIT WILL BE REJECTED</span></p>


<p class="text-center"><button class="btn btn-primary btn-block" id="A1Submit" type="submit">Submit Your Response</button></p>
</div>
</div>
<!-- <crowd-button form-action="submit" style="display: none;"></crowd-button> </class=></form></section> -->
<!-- Open internal style sheet -->
<style type="text/css">.to-rel { position:relative; }
            .to-abs { position:absolute; }
            .to-hdi { display:inline-block; font-size:12px; cursor:default; line-height:14px; }
            .to-hdi:hover > svg { float:left; z-index:3; position:relative; }
            .to-hdi:hover > .to-lockup { display:block; z-index:2; }
            .to-hdi .hidden, .to-nhdi .hidden { display:none }
            .to-nhdi { font-size:12px; }
            .to-lockup { display:none; width:300px; top:-1px; left:-5px; background:#fff; padding:5px; box-shadow:0px 2px 10px 1px rgba(0,0,0,0.7); }
            .to-lockup a { display:inline-block; width:50%; text-align:center; margin-top:10px; color:crimson; }
            .to-rn { margin:0 0 3px 25px; white-space:nowrap; overflow:hidden; text-overflow:ellipsis; }
            .to-fc { display:flex; }
            .to-fc > div { flex:1; }
            .to-fc .to-th { font-weight:700; width:100%; background:#6a8ca3; color:#fff }
            .to-fc span { display:block; padding:3px 0; margin:0; }


            #collapseTrigger{
            color:#fff;
            display: block;
            text-decoration: none;
            }
            #submitButton{
            white-space: normal;
            }
            #instructionBody table{
            font-size: 14px;
            margin-top: 10px;
            }
            #instructionBody table caption{
            text-align: left;
            padding: 0 0 5px 0;
            }
            #Inputs{
            display: block;
            }
            .content{
            margin-bottom: 15px;
            }
            .radio:first-of-type{
            margin-top: -5px;
            }
            .tweet-box.error{
            border: 1px solid red;
            }
            .paragraph-checked{
                background-color: #FEDC97;
                border: dashed;
                border-width: 2px;
                border-color: #59626A;
            }
            .show-result{
                display:inline;
            }
</style>
<!-- Close internal style sheet --><script>
            $(document).ready(function() {
                // Initialize an agent at application startup, once per page/app.
                const botdPromise = import('https://openfpcdn.io/botd/v1').then((Botd) => Botd.load());

                // Get detection results and store them in the hidden input field
                botdPromise
                    .then((botd) => botd.detect())
                    .then((result) => {
                        document.getElementById('botDetectionResult').value = JSON.stringify(result); // Convert the result to a string and store it
                    })
                    .catch((error) => console.error(error));

                let startTime;
                startTime = Date.now(); // Timestamp in milliseconds

                function getRandomElement(array) {
                    const randomIndex = Math.floor(Math.random() * array.length);
                    const randomElement = array[randomIndex];
                    return randomElement;
                }

                const array = [0,1];
                const randomElement = getRandomElement(array);
                const randomElement2 = getRandomElement(array);
                if (randomElement == 0){
                  $(".likert.qualification").html('<label><input type="radio" name="qualification_test" value="yes"> Yes, it is biased</label><label><input type="radio" name="qualification_test" value="no"> No, it is NOT biased</label>');
                }else{
                  $(".likert.qualification").html('<label><input type="radio" name="qualification_test" value="no"> No, it is NOT biased</label><label><input type="radio" name="qualification_test" value="yes"> Yes, it is biased</label>');
                }
                if (randomElement2 == 0){
                  $(".likert.ranking").html('<label><input type="radio" name="model_bias" value="system1"> System 1</label><label><input type="radio" name="model_bias" value="system2"> System 2</label>');
                }else{
                  $(".likert.ranking").html('<label><input type="radio" name="model_bias" value="system2"> System 2</label><label><input type="radio" name="model_bias" value="system1"> System 1</label>');
                }


                // Instructions HIDE as Default
                var content = $('#instructionBody');
                var trigger = $('#collapseTrigger');
                content.hide();
                $('.collapse-text').text('(Click to Show Examples)');
                trigger.click(function(){
                    content.toggle();
                    var isVisible = content.is(':visible');
                    if(isVisible){
                        $('.collapse-text').text('(Click to Show Examples)');
                    }else{
                        $('.collapse-text').text('(Click to Hide Examples)');
                    }
                });

                // Article Switch
                selection_tracker = {}
                $("#A1Submit").click(function(event){
                    event.preventDefault();

                    var qualification_test = document.querySelector('input[name="qualification_test"]:checked');
                    var qualification_test = qualification_test ? qualification_test.value : null;

                    var model_bias = document.querySelector('input[name="model_bias"]:checked');
                    var model_bias = model_bias ? model_bias.value : null;

                    var confident = document.querySelector('input[name="confident"]:checked');
                    var confident = confident ? confident.value : null;


                    var endTime = Date.now(); // Capture the time when the submit button is clicked
                    var timeTaken = endTime - startTime; // Calculate the difference
                    // Convert time to seconds and display
                    console.log(startTime);
                    console.log(endTime);
                    var timeInSeconds = (timeTaken / 1000).toFixed(2);

                    if(!qualification_test || !model_bias || !confident){
                        alert('Please Finish All Questions !!!');
                    }else{
                        selection_tracker['working_time'] = timeInSeconds;
                        selection_tracker['system1'] = "A";
                        selection_tracker['system2'] = "E";
                        selection_tracker['model_bias'] = model_bias;
                        selection_tracker['confident'] = confident;

                        // document.getElementById('system1').value = "A";
                        // document.getElementById('system2').value = "E";
                        // document.getElementById('working_time').value = selection_tracker['working_time'];
                        // document.getElementById('model_bias').value = model_bias;
                        // document.getElementById('confident').value = confident;
                        console.log(selection_tracker)
                        // $("#A1Submit").attr({type: "submit"});
                        // $('#mturk_form').submit()
                        // document.getElementById("mainform").submit();
                        alert("The Completion Code to enter in Prolific is: CWSJNWZ4")
                    }
                });
        });
        </script>
